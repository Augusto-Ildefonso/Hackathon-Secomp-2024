<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comunicação com o Servidor</title>
</head>
<body>
    <h1>Bem-vindo!</h1>
    <p>Digite uma mensagem para enviar ao servidor:</p>

    <!-- Campo para inserir mensagem -->
    <input type="text" id="mensagem" placeholder="Digite sua mensagem">
    <button onclick="enviarMensagem()">Enviar</button>

    <!-- Área para mostrar a resposta do servidor -->
    <p id="resposta"></p>

    <script>
        async function enviarMensagem() {
            const mensagem = document.getElementById('mensagem').value;
            const respostaElemento = document.getElementById('resposta');
            
            try {
                // Envia a mensagem para o servidor usando o método GET
                const response = await fetch(`/api?mensagem=${encodeURIComponent(mensagem)}`);
                
                // Verifica se a resposta foi bem-sucedida
                if (response.ok) {
                    const respostaTexto = await response.text();
                    respostaElemento.textContent = "Resposta do servidor: " + respostaTexto;
                } else {
                    respostaElemento.textContent = "Erro ao comunicar com o servidor.";
                }
            } catch (error) {
                console.error("Erro na requisição:", error);
                respostaElemento.textContent = "Erro ao conectar com o servidor.";
            }
        }
    </script>
</body>
</html>
